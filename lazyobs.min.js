"use strict";function query(e){return Array.from(document.querySelectorAll(e))}function replaceSrc(e){e.src=e.dataset.src,e.removeAttribute("data-src")}function removeHint(){this.style.willChange="auto"}function addLoaded(e){e.addEventListener("animationend",removeHint),e.classList.add("loaded")}function loadScript(e){return new Promise(function(t,n){var r=document.createElement("script");r.async=!0,r.src="/assets/js/"+e.id+".js",r.onload=function(){t(r.src),addLoaded(e)},r.onerror=n,document.head.lastChild!=r&&document.head.appendChild(r)})}function load(e){if("VIDEO"==e.nodeName){e.onloadstart=function(){addLoaded(e)};for(var t=e.getElementsByTagName("source"),n=0;n<t.length;n++)replaceSrc(t[n]);e.load()}else"IMG"==e.nodeName?(e.onload=function(){addLoaded(e)},replaceSrc(e)):e.hasAttribute("id")&&loadScript(e)}var observer=new IntersectionObserver(function(e){e.forEach(function(e){("boolean"==typeof e.isIntersecting?e.isIntersecting:e.intersectionRect.height>0)&&(load(e.target),observer.unobserve(e.target))})},{rootMargin:"150px 0px"});query(".lazy").forEach(function(e){observer.observe(e)});