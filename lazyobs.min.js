"use strict";function query(e){return Array.from(document.querySelectorAll(e))}function replaceSrc(e){e.src=e.dataset.src,e.removeAttribute("data-src")}function removeHint(){this.style.willChange="auto"}function addLoaded(e){e.addEventListener("animationend",removeHint),e.classList.add("loaded")}function loadScript(e){return new Promise(function(t,r){var n=document.createElement("script");n.async=!0,n.src=e.dataset.src,e.removeAttribute("data-src"),n.onload=function(){t(n.src),addLoaded(e)},n.onerror=r,document.head.lastChild!=n&&document.head.appendChild(n)})}function load(e){if("VIDEO"==e.nodeName){e.onloadstart=function(){addLoaded(e)};for(var t=e.getElementsByTagName("source"),r=0;r<t.length;r++)replaceSrc(t[r]);e.load()}else"IMG"==e.nodeName?(e.onload=function(){addLoaded(e)},replaceSrc(e)):loadScript(e)}var observer=new IntersectionObserver(function(e){e.forEach(function(e){("boolean"==typeof e.isIntersecting?e.isIntersecting:e.intersectionRect.height>0)&&(load(e.target),observer.unobserve(e.target))})},{rootMargin:"150px 0px"});query(".lazy").forEach(function(e){observer.observe(e)});